{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { Box } from '../Box';\nimport { EdgeControl } from './EdgeControl';\nimport { parseMetricToNum } from '../../utils';\nvar Container = styled(Box).withConfig({\n  displayName: \"RangeSelector__Container\",\n  componentId: \"siof5p-0\"\n})([\"user-select:none;\"]);\nvar RangeSelector = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var color = _ref.color,\n      _ref$direction = _ref.direction,\n      direction = _ref$direction === void 0 ? 'horizontal' : _ref$direction,\n      invert = _ref.invert,\n      _ref$max = _ref.max,\n      max = _ref$max === void 0 ? 100 : _ref$max,\n      _ref$messages = _ref.messages,\n      messages = _ref$messages === void 0 ? {\n    lower: 'Lower Bounds',\n    upper: 'Upper Bounds'\n  } : _ref$messages,\n      _ref$min = _ref.min,\n      min = _ref$min === void 0 ? 0 : _ref$min,\n      onChange = _ref.onChange,\n      _ref$opacity = _ref.opacity,\n      opacity = _ref$opacity === void 0 ? 'medium' : _ref$opacity,\n      round = _ref.round,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 'medium' : _ref$size,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 1 : _ref$step,\n      _ref$values = _ref.values,\n      values = _ref$values === void 0 ? [] : _ref$values,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"color\", \"direction\", \"invert\", \"max\", \"messages\", \"min\", \"onChange\", \"opacity\", \"round\", \"size\", \"step\", \"values\"]);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useState = useState(),\n      changing = _useState[0],\n      setChanging = _useState[1];\n\n  var _useState2 = useState(),\n      lastChange = _useState2[0],\n      setLastChange = _useState2[1];\n\n  var _useState3 = useState(),\n      moveValue = _useState3[0],\n      setMoveValue = _useState3[1];\n\n  var containerRef = useRef();\n  var valueForMouseCoord = useCallback(function (event) {\n    var rect = containerRef.current.getBoundingClientRect();\n    var value;\n\n    if (direction === 'vertical') {\n      // there is no x and y in unit testing\n      var y = event.clientY - (rect.top || 0); // test resilience\n\n      var scaleY = rect.height / (max - min + 1) || 1; // test resilience\n\n      value = Math.floor(y / scaleY) + min;\n    } else {\n      var x = event.clientX - (rect.left || 0); // test resilience\n\n      var scaleX = rect.width / (max - min + 1) || 1; // test resilience\n\n      value = Math.floor(x / scaleX) + min;\n    } // align with closest step within [min, max]\n\n\n    var result = Math.ceil(value / step) * step;\n\n    if (result < min) {\n      return min;\n    }\n\n    if (result > max) {\n      return max;\n    }\n\n    return result;\n  }, [direction, max, min, step]);\n  var onMouseMove = useCallback(function (event) {\n    var value = valueForMouseCoord(event);\n    var nextValues;\n\n    if (changing === 'lower' && value <= values[1] && value !== moveValue) {\n      nextValues = [value, values[1]];\n    } else if (changing === 'upper' && value >= values[0] && value !== moveValue) {\n      nextValues = [values[0], value];\n    } else if (changing === 'selection' && value !== moveValue) {\n      if (value === max) {\n        nextValues = [max - (values[1] - values[0]), max];\n      } else if (value === min) {\n        nextValues = [min, min + (values[1] - values[0])];\n      } else {\n        var delta = value - moveValue;\n\n        if (values[0] + delta >= min && values[1] + delta <= max) {\n          nextValues = [values[0] + delta, values[1] + delta];\n        }\n      }\n    }\n\n    if (nextValues) {\n      setMoveValue(value);\n      onChange(nextValues);\n    }\n  }, [values, changing, moveValue, max, min, setMoveValue, onChange, valueForMouseCoord]);\n  useEffect(function () {\n    var onMouseUp = function onMouseUp() {\n      return setChanging(undefined);\n    };\n\n    if (changing) {\n      window.addEventListener('mousemove', onMouseMove);\n      window.addEventListener('mouseup', onMouseUp);\n      return function () {\n        window.removeEventListener('mousemove', onMouseMove);\n        window.removeEventListener('mouseup', onMouseUp);\n      };\n    }\n\n    return undefined;\n  }, [changing, onMouseMove]);\n  var onClick = useCallback(function (event) {\n    var value = valueForMouseCoord(event);\n\n    if (value <= values[0] || value < values[1] && lastChange === 'lower') {\n      setLastChange('lower');\n      onChange([value, values[1]]);\n    } else if (value >= values[1] || value > values[0] && lastChange === 'upper') {\n      setLastChange('upper');\n      onChange([values[0], value]);\n    }\n  }, [lastChange, onChange, valueForMouseCoord, values]);\n  var onTouchMove = useCallback(function (event) {\n    var touchEvent = event.changedTouches[0];\n    onMouseMove(touchEvent);\n  }, [onMouseMove]);\n  var lower = values[0],\n      upper = values[1]; // It needs to be true when vertical, due to how browsers manage height\n  // const fill = direction === 'vertical' ? true : 'horizontal';\n\n  var thickness = size === 'full' ? undefined : parseMetricToNum(theme.global.edgeSize[size] || size) + \"px\";\n  var layoutProps = {\n    fill: direction,\n    round: round\n  };\n  if (direction === 'vertical') layoutProps.width = thickness;else layoutProps.height = thickness;\n  if (size === 'full') layoutProps.alignSelf = 'stretch';\n  return /*#__PURE__*/React.createElement(Container, _extends({\n    ref: containerRef,\n    direction: direction === 'vertical' ? 'column' : 'row',\n    align: \"center\",\n    fill: true\n  }, rest, {\n    tabIndex: \"-1\",\n    onClick: onChange ? onClick : undefined,\n    onTouchMove: onChange ? onTouchMove : undefined\n  }), /*#__PURE__*/React.createElement(Box, _extends({\n    style: {\n      flex: lower - min + \" 0 0\"\n    },\n    background: invert ? // preserve existing dark, instead of using darknes\n    // of this color\n    {\n      color: color || theme.rangeSelector.background.invert.color,\n      opacity: opacity,\n      dark: theme.dark\n    } : undefined\n  }, layoutProps)), /*#__PURE__*/React.createElement(EdgeControl, {\n    a11yTitle: messages.lower,\n    tabIndex: 0,\n    ref: ref,\n    color: color,\n    direction: direction,\n    thickness: thickness,\n    edge: \"lower\",\n    onMouseDown: onChange ? function () {\n      return setChanging('lower');\n    } : undefined,\n    onTouchStart: onChange ? function () {\n      return setChanging('lower');\n    } : undefined,\n    onDecrease: onChange && lower - step >= min ? function () {\n      return onChange([lower - step, upper]);\n    } : undefined,\n    onIncrease: onChange && lower + step <= upper ? function () {\n      return onChange([lower + step, upper]);\n    } : undefined\n  }), /*#__PURE__*/React.createElement(Box, _extends({\n    style: {\n      flex: upper - lower + 1 + \" 0 0\",\n      cursor: direction === 'vertical' ? 'ns-resize' : 'ew-resize'\n    },\n    background: invert ? undefined : // preserve existing dark, instead of using darknes of\n    // this color\n    {\n      color: color || 'control',\n      opacity: opacity,\n      dark: theme.dark\n    }\n  }, layoutProps, {\n    onMouseDown: onChange ? function (event) {\n      var nextMoveValue = valueForMouseCoord(event);\n      setChanging('selection');\n      setMoveValue(nextMoveValue);\n    } : undefined\n  })), /*#__PURE__*/React.createElement(EdgeControl, {\n    a11yTitle: messages.upper,\n    tabIndex: 0,\n    color: color,\n    direction: direction,\n    thickness: thickness,\n    edge: \"upper\",\n    onMouseDown: onChange ? function () {\n      return setChanging('upper');\n    } : undefined,\n    onTouchStart: onChange ? function () {\n      return setChanging('upper');\n    } : undefined,\n    onDecrease: onChange && upper - step >= lower ? function () {\n      return onChange([lower, upper - step]);\n    } : undefined,\n    onIncrease: onChange && upper + step <= max ? function () {\n      return onChange([lower, upper + step]);\n    } : undefined\n  }), /*#__PURE__*/React.createElement(Box, _extends({\n    style: {\n      flex: max - upper + \" 0 0\"\n    },\n    background: invert ? // preserve existing dark, instead of using darknes of this\n    // color\n    {\n      color: color || theme.rangeSelector.background.invert.color,\n      opacity: opacity,\n      dark: theme.dark\n    } : undefined\n  }, layoutProps, {\n    round: round\n  })));\n});\nRangeSelector.displayName = 'RangeSelector';\nvar RangeSelectorDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  RangeSelectorDoc = require('./doc').doc(RangeSelector);\n}\n\nvar RangeSelectorWrapper = RangeSelectorDoc || RangeSelector;\nexport { RangeSelectorWrapper as RangeSelector };","map":{"version":3,"sources":["E:/react/my-app/node_modules/grommet/es6/components/RangeSelector/RangeSelector.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","forwardRef","useCallback","useContext","useEffect","useRef","useState","styled","ThemeContext","Box","EdgeControl","parseMetricToNum","Container","withConfig","displayName","componentId","RangeSelector","_ref","ref","color","_ref$direction","direction","invert","_ref$max","max","_ref$messages","messages","lower","upper","_ref$min","min","onChange","_ref$opacity","opacity","round","_ref$size","size","_ref$step","step","_ref$values","values","rest","theme","defaultProps","_useState","changing","setChanging","_useState2","lastChange","setLastChange","_useState3","moveValue","setMoveValue","containerRef","valueForMouseCoord","event","rect","current","getBoundingClientRect","value","y","clientY","top","scaleY","height","Math","floor","x","clientX","left","scaleX","width","result","ceil","onMouseMove","nextValues","delta","onMouseUp","undefined","window","addEventListener","removeEventListener","onClick","onTouchMove","touchEvent","changedTouches","thickness","global","edgeSize","layoutProps","fill","alignSelf","createElement","align","tabIndex","style","flex","background","rangeSelector","dark","a11yTitle","edge","onMouseDown","onTouchStart","onDecrease","onIncrease","cursor","nextMoveValue","RangeSelectorDoc","process","env","NODE_ENV","require","doc","RangeSelectorWrapper"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { Box } from '../Box';\nimport { EdgeControl } from './EdgeControl';\nimport { parseMetricToNum } from '../../utils';\nvar Container = styled(Box).withConfig({\n  displayName: \"RangeSelector__Container\",\n  componentId: \"siof5p-0\"\n})([\"user-select:none;\"]);\nvar RangeSelector = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var color = _ref.color,\n      _ref$direction = _ref.direction,\n      direction = _ref$direction === void 0 ? 'horizontal' : _ref$direction,\n      invert = _ref.invert,\n      _ref$max = _ref.max,\n      max = _ref$max === void 0 ? 100 : _ref$max,\n      _ref$messages = _ref.messages,\n      messages = _ref$messages === void 0 ? {\n    lower: 'Lower Bounds',\n    upper: 'Upper Bounds'\n  } : _ref$messages,\n      _ref$min = _ref.min,\n      min = _ref$min === void 0 ? 0 : _ref$min,\n      onChange = _ref.onChange,\n      _ref$opacity = _ref.opacity,\n      opacity = _ref$opacity === void 0 ? 'medium' : _ref$opacity,\n      round = _ref.round,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 'medium' : _ref$size,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 1 : _ref$step,\n      _ref$values = _ref.values,\n      values = _ref$values === void 0 ? [] : _ref$values,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"color\", \"direction\", \"invert\", \"max\", \"messages\", \"min\", \"onChange\", \"opacity\", \"round\", \"size\", \"step\", \"values\"]);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useState = useState(),\n      changing = _useState[0],\n      setChanging = _useState[1];\n\n  var _useState2 = useState(),\n      lastChange = _useState2[0],\n      setLastChange = _useState2[1];\n\n  var _useState3 = useState(),\n      moveValue = _useState3[0],\n      setMoveValue = _useState3[1];\n\n  var containerRef = useRef();\n  var valueForMouseCoord = useCallback(function (event) {\n    var rect = containerRef.current.getBoundingClientRect();\n    var value;\n\n    if (direction === 'vertical') {\n      // there is no x and y in unit testing\n      var y = event.clientY - (rect.top || 0); // test resilience\n\n      var scaleY = rect.height / (max - min + 1) || 1; // test resilience\n\n      value = Math.floor(y / scaleY) + min;\n    } else {\n      var x = event.clientX - (rect.left || 0); // test resilience\n\n      var scaleX = rect.width / (max - min + 1) || 1; // test resilience\n\n      value = Math.floor(x / scaleX) + min;\n    } // align with closest step within [min, max]\n\n\n    var result = Math.ceil(value / step) * step;\n\n    if (result < min) {\n      return min;\n    }\n\n    if (result > max) {\n      return max;\n    }\n\n    return result;\n  }, [direction, max, min, step]);\n  var onMouseMove = useCallback(function (event) {\n    var value = valueForMouseCoord(event);\n    var nextValues;\n\n    if (changing === 'lower' && value <= values[1] && value !== moveValue) {\n      nextValues = [value, values[1]];\n    } else if (changing === 'upper' && value >= values[0] && value !== moveValue) {\n      nextValues = [values[0], value];\n    } else if (changing === 'selection' && value !== moveValue) {\n      if (value === max) {\n        nextValues = [max - (values[1] - values[0]), max];\n      } else if (value === min) {\n        nextValues = [min, min + (values[1] - values[0])];\n      } else {\n        var delta = value - moveValue;\n\n        if (values[0] + delta >= min && values[1] + delta <= max) {\n          nextValues = [values[0] + delta, values[1] + delta];\n        }\n      }\n    }\n\n    if (nextValues) {\n      setMoveValue(value);\n      onChange(nextValues);\n    }\n  }, [values, changing, moveValue, max, min, setMoveValue, onChange, valueForMouseCoord]);\n  useEffect(function () {\n    var onMouseUp = function onMouseUp() {\n      return setChanging(undefined);\n    };\n\n    if (changing) {\n      window.addEventListener('mousemove', onMouseMove);\n      window.addEventListener('mouseup', onMouseUp);\n      return function () {\n        window.removeEventListener('mousemove', onMouseMove);\n        window.removeEventListener('mouseup', onMouseUp);\n      };\n    }\n\n    return undefined;\n  }, [changing, onMouseMove]);\n  var onClick = useCallback(function (event) {\n    var value = valueForMouseCoord(event);\n\n    if (value <= values[0] || value < values[1] && lastChange === 'lower') {\n      setLastChange('lower');\n      onChange([value, values[1]]);\n    } else if (value >= values[1] || value > values[0] && lastChange === 'upper') {\n      setLastChange('upper');\n      onChange([values[0], value]);\n    }\n  }, [lastChange, onChange, valueForMouseCoord, values]);\n  var onTouchMove = useCallback(function (event) {\n    var touchEvent = event.changedTouches[0];\n    onMouseMove(touchEvent);\n  }, [onMouseMove]);\n  var lower = values[0],\n      upper = values[1]; // It needs to be true when vertical, due to how browsers manage height\n  // const fill = direction === 'vertical' ? true : 'horizontal';\n\n  var thickness = size === 'full' ? undefined : parseMetricToNum(theme.global.edgeSize[size] || size) + \"px\";\n  var layoutProps = {\n    fill: direction,\n    round: round\n  };\n  if (direction === 'vertical') layoutProps.width = thickness;else layoutProps.height = thickness;\n  if (size === 'full') layoutProps.alignSelf = 'stretch';\n  return /*#__PURE__*/React.createElement(Container, _extends({\n    ref: containerRef,\n    direction: direction === 'vertical' ? 'column' : 'row',\n    align: \"center\",\n    fill: true\n  }, rest, {\n    tabIndex: \"-1\",\n    onClick: onChange ? onClick : undefined,\n    onTouchMove: onChange ? onTouchMove : undefined\n  }), /*#__PURE__*/React.createElement(Box, _extends({\n    style: {\n      flex: lower - min + \" 0 0\"\n    },\n    background: invert ? // preserve existing dark, instead of using darknes\n    // of this color\n    {\n      color: color || theme.rangeSelector.background.invert.color,\n      opacity: opacity,\n      dark: theme.dark\n    } : undefined\n  }, layoutProps)), /*#__PURE__*/React.createElement(EdgeControl, {\n    a11yTitle: messages.lower,\n    tabIndex: 0,\n    ref: ref,\n    color: color,\n    direction: direction,\n    thickness: thickness,\n    edge: \"lower\",\n    onMouseDown: onChange ? function () {\n      return setChanging('lower');\n    } : undefined,\n    onTouchStart: onChange ? function () {\n      return setChanging('lower');\n    } : undefined,\n    onDecrease: onChange && lower - step >= min ? function () {\n      return onChange([lower - step, upper]);\n    } : undefined,\n    onIncrease: onChange && lower + step <= upper ? function () {\n      return onChange([lower + step, upper]);\n    } : undefined\n  }), /*#__PURE__*/React.createElement(Box, _extends({\n    style: {\n      flex: upper - lower + 1 + \" 0 0\",\n      cursor: direction === 'vertical' ? 'ns-resize' : 'ew-resize'\n    },\n    background: invert ? undefined : // preserve existing dark, instead of using darknes of\n    // this color\n    {\n      color: color || 'control',\n      opacity: opacity,\n      dark: theme.dark\n    }\n  }, layoutProps, {\n    onMouseDown: onChange ? function (event) {\n      var nextMoveValue = valueForMouseCoord(event);\n      setChanging('selection');\n      setMoveValue(nextMoveValue);\n    } : undefined\n  })), /*#__PURE__*/React.createElement(EdgeControl, {\n    a11yTitle: messages.upper,\n    tabIndex: 0,\n    color: color,\n    direction: direction,\n    thickness: thickness,\n    edge: \"upper\",\n    onMouseDown: onChange ? function () {\n      return setChanging('upper');\n    } : undefined,\n    onTouchStart: onChange ? function () {\n      return setChanging('upper');\n    } : undefined,\n    onDecrease: onChange && upper - step >= lower ? function () {\n      return onChange([lower, upper - step]);\n    } : undefined,\n    onIncrease: onChange && upper + step <= max ? function () {\n      return onChange([lower, upper + step]);\n    } : undefined\n  }), /*#__PURE__*/React.createElement(Box, _extends({\n    style: {\n      flex: max - upper + \" 0 0\"\n    },\n    background: invert ? // preserve existing dark, instead of using darknes of this\n    // color\n    {\n      color: color || theme.rangeSelector.background.invert.color,\n      opacity: opacity,\n      dark: theme.dark\n    } : undefined\n  }, layoutProps, {\n    round: round\n  })));\n});\nRangeSelector.displayName = 'RangeSelector';\nvar RangeSelectorDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  RangeSelectorDoc = require('./doc').doc(RangeSelector);\n}\n\nvar RangeSelectorWrapper = RangeSelectorDoc || RangeSelector;\nexport { RangeSelectorWrapper as RangeSelector };"]},"metadata":{},"sourceType":"module"}